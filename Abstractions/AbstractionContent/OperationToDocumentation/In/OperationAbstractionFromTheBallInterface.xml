<?xml version="1.0"?>
<OperationAbstraction xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/Operation_v1_0.xsd">
  <Operations codeNamespace="TheBall.Interface">
    <Operation name="ExecuteOperation">
      <OperationSpec>
        <Description>Execute given operation</Description>
      </OperationSpec>
      <Parameters>
        <Parameter name="OwnerLocation" dataType="string" designDesc="Owner location of the operation context" state="designApproved" />
        <Parameter name="OperationDomain" dataType="string" designDesc="Operation namespace" state="designApproved" />
        <Parameter name="OperationName" dataType="string" designDesc="Operation name" state="designApproved" />
        <Parameter name="OperationParameters" dataType="byte[]" designDesc="Operation parameters binary serialized." state="designApproved" />
        <Parameter name="CallerProvidedInfo" dataType="string" designDesc="Caller provided information about the call. For caller specific purposes." state="underDesign" />
      </Parameters>
      <Execution>
        <SequentialExecution />
      </Execution>
    </Operation>
    <Operation name="UpdateStatusSummary">
      <OperationSpec>
        <Description>Updates status summary for given owner, based on changed ID lists and time range.</Description>
      </OperationSpec>
      <Parameters>
        <Parameter name="Owner" dataType="TheBall.CORE.IContainerOwner" designDesc="Owner of the operation context" state="implemented" />
        <Parameter name="StartTime" dataType="DateTime" designDesc="Starting time of changes updated in this cycle" state="implemented" />
        <Parameter name="EndTime" dataType="DateTime" designDesc="Ending time of changes updated in this cycle" state="implemented" />
        <Parameter name="ChangedIDList" dataType="string[]" designDesc="Changed ID list on this cycle" state="implemented" />
        <Parameter name="RemoveExpiredEntriesSeconds" dataType="int" designDesc="Remove entries older than amount of seconds given here" state="implemented" />
      </Parameters>
      <Execution>
        <SequentialExecution>
          <TargetDefinition name="ChangeItem" dataType="InformationChangeItem" designDesc="Change item registering the ID changed list. NOTE! ID is of form UTCStart_UTCEnd_GUID" state="implemented">
            <Parameter name="Owner" />
            <Parameter name="StartTime" />
            <Parameter name="EndTime" />
            <Parameter name="ChangedIDList" />
          </TargetDefinition>
          <MethodExecute name="StoreObject" designDesc="Store changeitem" state="implemented">
            <Target name="ChangeItem" />
          </MethodExecute>
          <MethodExecute name="EnsureUpdateOnStatusSummary" designDesc="Guarantee update on StatusSummary, retry if fails. Sort the RecentChangeItemIDs to ID order, remove expired entries" state="implemented">
            <Parameter name="Owner" />
            <Parameter name="RemoveExpiredEntriesSeconds" />
            <Target name="ChangeItem" />
            <ReturnValue name="ExpiredEntryIDs" dataType="string[]" designDesc="Expired entries based on expiration time" state="implemented" />
          </MethodExecute>
          <MethodExecute name="RemoveExpiredEntries" designDesc="Remove expired changeitem entries" state="implemented">
            <Parameter name="Owner" />
            <Target name="EnsureUpdateOnStatusSummaryOutput" />
          </MethodExecute>
        </SequentialExecution>
      </Execution>
    </Operation>
  </Operations>
</OperationAbstraction>